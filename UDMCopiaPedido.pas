unit UDMCopiaPedido;

interface

uses
  SysUtils, Classes, FMTBcd, DB, DBClient, Provider, SqlExpr, DBXpress, Variants, Dialogs,
  Math;

type
  TDMCopiaPedido = class(TDataModule)
    sdsPedido: TSQLDataSet;
    dspPedido: TDataSetProvider;
    cdsPedido: TClientDataSet;
    dsPedido: TDataSource;
    dsPedido_Mestre: TDataSource;
    sdsPedido_Itens: TSQLDataSet;
    cdsPedido_Itens: TClientDataSet;
    dsPedido_Itens: TDataSource;
    sdsPedido_Desconto: TSQLDataSet;
    cdsPedido_Desconto: TClientDataSet;
    dsPedido_Desconto: TDataSource;
    sdsPedidoID: TIntegerField;
    sdsPedidoFILIAL: TIntegerField;
    sdsPedidoDTEMISSAO: TDateField;
    sdsPedidoPEDIDO_CLIENTE: TStringField;
    sdsPedidoID_CLIENTE: TIntegerField;
    sdsPedidoID_TRANSPORTADORA: TIntegerField;
    sdsPedidoID_REDESPACHO: TIntegerField;
    sdsPedidoID_CONDPGTO: TIntegerField;
    sdsPedidoID_VENDEDOR: TIntegerField;
    sdsPedidoID_CFOP: TIntegerField;
    sdsPedidoTIPO_FRETE: TStringField;
    sdsPedidoPERC_COMISSAO: TFloatField;
    sdsPedidoQTD: TFloatField;
    sdsPedidoQTD_RESTANTE: TFloatField;
    sdsPedidoQTD_CANCELADO: TFloatField;
    sdsPedidoQTD_FATURADO: TFloatField;
    sdsPedidoVLR_TOTAL: TFloatField;
    sdsPedidoVLR_DESCONTO: TFloatField;
    sdsPedidoCANCELADO: TStringField;
    sdsPedidoDOLAR: TStringField;
    sdsPedidoDTENTREGA: TDateField;
    sdsPedidoPERC_DESCONTO: TFloatField;
    sdsPedidoOBS: TMemoField;
    sdsPedidoVLR_FRETE: TFloatField;
    sdsPedidoBASE_ICMS: TFloatField;
    sdsPedidoVLR_ICMS: TFloatField;
    sdsPedidoBASE_ICMSTRANSF: TFloatField;
    sdsPedidoPERC_TRANSF: TFloatField;
    sdsPedidoVLR_TRANSF: TFloatField;
    sdsPedidoVLR_IPI: TFloatField;
    sdsPedidoBASE_ICMSSIMPLES: TFloatField;
    sdsPedidoVLR_ICMSSIMPLES: TFloatField;
    sdsPedidoPERC_ICMSSIMPLES: TFloatField;
    sdsPedidoBASE_ICMSSUBST: TFloatField;
    sdsPedidoVLR_ICMSSUBST: TFloatField;
    sdsPedidoID_CONFIG_CFOP: TIntegerField;
    sdsPedidoTIPO_DESCONTO: TStringField;
    sdsPedidoLOCALENTREGA: TStringField;
    sdsPedidoVLR_ITENS: TFloatField;
    sdsPedidoPESOBRUTO: TFloatField;
    sdsPedidoPESOLIQUIDO: TFloatField;
    sdsPedidoCALCULARICMSSOBREIPI: TStringField;
    sdsPedidoID_REGIMETRIB: TIntegerField;
    sdsPedidoSIMPLES_FILIAL: TStringField;
    sdsPedidoDESCRICAO_DESC: TStringField;
    sdsPedidoIMP_OC_NOTA: TStringField;
    sdsPedidoNOME_CLIENTE: TStringField;
    sdsPedidoTIPO_REG: TStringField;
    sdsPedidoVALIDADE: TStringField;
    sdsPedidoNUM_ORCAMENTO: TIntegerField;
    sdsPedidoNUM_PEDIDO: TIntegerField;
    sdsPedidoID_OPERACAO_NOTA: TIntegerField;
    sdsPedidoFINALIDADE: TStringField;
    sdsPedidoVLR_ADIANTAMENTO: TFloatField;
    sdsPedidoFATURADO: TStringField;
    sdsPedidoID_SOLICITANTE: TIntegerField;
    sdsPedidoID_PROJETO: TIntegerField;
    sdsPedidoID_CLIENTE_TRIANGULAR: TIntegerField;
    sdsPedidoNUM_DOC: TIntegerField;
    sdsPedidoFRETE_SOMAR: TStringField;
    sdsPedidoROMANEIO: TStringField;
    sdsPedidoTIPO_VENDA: TStringField;
    sdsPedidoAPROVADO_ORC: TStringField;
    sdsPedidoNOME_CONSUMIDOR: TStringField;
    sdsPedidoID_FUNCIONARIO: TIntegerField;
    sdsPedidoNOME_PRODUTO_PROPOSTA: TStringField;
    sdsPedidoVLR_SERVICO: TFloatField;
    sdsPedidoID_CONTA_ORCAMENTO: TIntegerField;
    sdsPedidoPERC_MARGEM: TFloatField;
    sdsPedidoVLR_TOTAL_TRILHOS: TFloatField;
    sdsPedidoVLR_TOTAL_ROLDANAS: TFloatField;
    sdsPedidoID_TIPO_COBRANCA: TIntegerField;
    sdsPedidoID_CONTA: TIntegerField;
    sdsPedidoVLR_ENTRADA: TFloatField;
    sdsPedidoDTINICIO_DUPLICATA: TDateField;
    sdsPedidoID_MAPA: TIntegerField;
    sdsPedido_ItensID: TIntegerField;
    sdsPedido_ItensITEM: TIntegerField;
    sdsPedido_ItensID_PRODUTO: TIntegerField;
    sdsPedido_ItensID_COR: TFMTBCDField;
    sdsPedido_ItensTAMANHO: TStringField;
    sdsPedido_ItensQTD: TFloatField;
    sdsPedido_ItensQTD_FATURADO: TFloatField;
    sdsPedido_ItensQTD_RESTANTE: TFloatField;
    sdsPedido_ItensQTD_CANCELADO: TFloatField;
    sdsPedido_ItensVLR_DESCONTO: TFloatField;
    sdsPedido_ItensCANCELADO: TStringField;
    sdsPedido_ItensDTENTREGA: TDateField;
    sdsPedido_ItensFATURADO: TStringField;
    sdsPedido_ItensDTFATURADO: TDateField;
    sdsPedido_ItensCOD_PRODUTO_CLIENTE: TStringField;
    sdsPedido_ItensTIPO: TStringField;
    sdsPedido_ItensUNIDADE: TStringField;
    sdsPedido_ItensNUMOS: TStringField;
    sdsPedido_ItensPERC_DESCONTO: TFloatField;
    sdsPedido_ItensVLR_FRETE: TFloatField;
    sdsPedido_ItensBASE_ICMS: TFloatField;
    sdsPedido_ItensVLR_ICMS: TFloatField;
    sdsPedido_ItensBASE_ICMSTRANSF: TFloatField;
    sdsPedido_ItensPERC_TRANSF: TFloatField;
    sdsPedido_ItensVLR_TRANSF: TFloatField;
    sdsPedido_ItensVLR_IPI: TFloatField;
    sdsPedido_ItensBASE_ICMSSIMPLES: TFloatField;
    sdsPedido_ItensVLR_ICMSSIMPLES: TFloatField;
    sdsPedido_ItensPERC_ICMSSIMPLES: TFloatField;
    sdsPedido_ItensBASE_ICMSSUBST: TFloatField;
    sdsPedido_ItensVLR_ICMSSUBST: TFloatField;
    sdsPedido_ItensVLR_DESCONTORATEIO: TFloatField;
    sdsPedido_ItensID_CFOP: TIntegerField;
    sdsPedido_ItensID_CSTIPI: TIntegerField;
    sdsPedido_ItensID_CSTICMS: TIntegerField;
    sdsPedido_ItensPERC_ICMS: TFloatField;
    sdsPedido_ItensPERC_IPI: TFloatField;
    sdsPedido_ItensREFERENCIA: TStringField;
    sdsPedido_ItensNOMEPRODUTO: TStringField;
    sdsPedido_ItensOBS_COMPLEMENTAR: TStringField;
    sdsPedido_ItensCALCULARICMSSOBREIPI: TStringField;
    sdsPedido_ItensVLR_UNITARIO: TFloatField;
    sdsPedido_ItensID_CONFIG_CFOP: TIntegerField;
    sdsPedido_ItensVLR_TOTAL: TFloatField;
    sdsPedido_ItensQTD_AFATURAR: TFloatField;
    sdsPedido_ItensID_VARIACAO: TIntegerField;
    sdsPedido_ItensOBS: TMemoField;
    sdsPedido_ItensPERC_TRIBICMS: TFloatField;
    sdsPedido_ItensID_ATELIER: TIntegerField;
    sdsPedido_ItensVLR_UNITARIO_ATELIER: TFloatField;
    sdsPedido_ItensVLR_TOTAL_ATELIER: TFloatField;
    sdsPedido_ItensDT_ENVIO_ATELIER: TDateField;
    sdsPedido_ItensDT_RETORNO_ATELIER: TDateField;
    sdsPedido_ItensVLR_PAGTO_ATELIER: TFloatField;
    sdsPedido_ItensDT_PAGTO_ATELIER: TDateField;
    sdsPedido_ItensAPROVADO_ORC: TStringField;
    sdsPedido_ItensMOTIVO_NAO_APROV: TMemoField;
    sdsPedido_ItensDTAPROVADO_NAO: TDateField;
    sdsPedido_ItensID_ORCAMENTO: TIntegerField;
    sdsPedido_ItensITEM_ORCAMENTO: TIntegerField;
    sdsPedido_ItensQTD_LIBERADA: TFloatField;
    sdsPedido_ItensQTD_PRODUZIDA: TFloatField;
    sdsPedido_ItensNUM_TALAO: TStringField;
    sdsPedido_ItensGERAR_LOTE: TStringField;
    sdsPedido_ItensCARIMBO: TStringField;
    sdsPedido_ItensDTPRODUCAO: TDateField;
    sdsPedido_ItensID_NCM: TIntegerField;
    sdsPedido_ItensTIPO_ORCAMENTO: TStringField;
    sdsPedido_ItensEND_FOTO: TStringField;
    sdsPedido_ItensITEM_CLIENTE: TIntegerField;
    sdsPedido_ItensQTD_PECA: TIntegerField;
    sdsPedido_ItensGRAVACAO_COM_ERRO: TStringField;
    sdsPedido_ItensQTD_FUT: TFloatField;
    sdsPedido_ItensTIPO_REG: TStringField;
    sdsPedido_ItensID_MOVESTOQUE: TIntegerField;
    sdsPedido_ItensGERAR_ESTOQUE: TStringField;
    sdsPedido_ItensITEM_ORIGINAL: TIntegerField;
    sdsPedido_ItensPERC_DIFERIMENTO: TFloatField;
    sdsPedido_ItensVLR_ICMSDIFERIDO: TFloatField;
    cdsPedidoID: TIntegerField;
    cdsPedidoFILIAL: TIntegerField;
    cdsPedidoDTEMISSAO: TDateField;
    cdsPedidoPEDIDO_CLIENTE: TStringField;
    cdsPedidoID_CLIENTE: TIntegerField;
    cdsPedidoID_TRANSPORTADORA: TIntegerField;
    cdsPedidoID_REDESPACHO: TIntegerField;
    cdsPedidoID_CONDPGTO: TIntegerField;
    cdsPedidoID_VENDEDOR: TIntegerField;
    cdsPedidoID_CFOP: TIntegerField;
    cdsPedidoTIPO_FRETE: TStringField;
    cdsPedidoPERC_COMISSAO: TFloatField;
    cdsPedidoQTD: TFloatField;
    cdsPedidoQTD_RESTANTE: TFloatField;
    cdsPedidoQTD_CANCELADO: TFloatField;
    cdsPedidoQTD_FATURADO: TFloatField;
    cdsPedidoVLR_TOTAL: TFloatField;
    cdsPedidoVLR_DESCONTO: TFloatField;
    cdsPedidoCANCELADO: TStringField;
    cdsPedidoDOLAR: TStringField;
    cdsPedidoDTENTREGA: TDateField;
    cdsPedidoPERC_DESCONTO: TFloatField;
    cdsPedidoOBS: TMemoField;
    cdsPedidoVLR_FRETE: TFloatField;
    cdsPedidoBASE_ICMS: TFloatField;
    cdsPedidoVLR_ICMS: TFloatField;
    cdsPedidoBASE_ICMSTRANSF: TFloatField;
    cdsPedidoPERC_TRANSF: TFloatField;
    cdsPedidoVLR_TRANSF: TFloatField;
    cdsPedidoVLR_IPI: TFloatField;
    cdsPedidoBASE_ICMSSIMPLES: TFloatField;
    cdsPedidoVLR_ICMSSIMPLES: TFloatField;
    cdsPedidoPERC_ICMSSIMPLES: TFloatField;
    cdsPedidoBASE_ICMSSUBST: TFloatField;
    cdsPedidoVLR_ICMSSUBST: TFloatField;
    cdsPedidoID_CONFIG_CFOP: TIntegerField;
    cdsPedidoTIPO_DESCONTO: TStringField;
    cdsPedidoLOCALENTREGA: TStringField;
    cdsPedidoVLR_ITENS: TFloatField;
    cdsPedidoPESOBRUTO: TFloatField;
    cdsPedidoPESOLIQUIDO: TFloatField;
    cdsPedidoCALCULARICMSSOBREIPI: TStringField;
    cdsPedidoID_REGIMETRIB: TIntegerField;
    cdsPedidoSIMPLES_FILIAL: TStringField;
    cdsPedidoDESCRICAO_DESC: TStringField;
    cdsPedidoIMP_OC_NOTA: TStringField;
    cdsPedidoNOME_CLIENTE: TStringField;
    cdsPedidoTIPO_REG: TStringField;
    cdsPedidoVALIDADE: TStringField;
    cdsPedidoNUM_ORCAMENTO: TIntegerField;
    cdsPedidoNUM_PEDIDO: TIntegerField;
    cdsPedidoID_OPERACAO_NOTA: TIntegerField;
    cdsPedidoFINALIDADE: TStringField;
    cdsPedidoVLR_ADIANTAMENTO: TFloatField;
    cdsPedidoFATURADO: TStringField;
    cdsPedidoID_SOLICITANTE: TIntegerField;
    cdsPedidoID_PROJETO: TIntegerField;
    cdsPedidoID_CLIENTE_TRIANGULAR: TIntegerField;
    cdsPedidoNUM_DOC: TIntegerField;
    cdsPedidoFRETE_SOMAR: TStringField;
    cdsPedidoROMANEIO: TStringField;
    cdsPedidoTIPO_VENDA: TStringField;
    cdsPedidoAPROVADO_ORC: TStringField;
    cdsPedidoNOME_CONSUMIDOR: TStringField;
    cdsPedidoID_FUNCIONARIO: TIntegerField;
    cdsPedidoNOME_PRODUTO_PROPOSTA: TStringField;
    cdsPedidoVLR_SERVICO: TFloatField;
    cdsPedidoID_CONTA_ORCAMENTO: TIntegerField;
    cdsPedidoPERC_MARGEM: TFloatField;
    cdsPedidoVLR_TOTAL_TRILHOS: TFloatField;
    cdsPedidoVLR_TOTAL_ROLDANAS: TFloatField;
    cdsPedidoID_TIPO_COBRANCA: TIntegerField;
    cdsPedidoID_CONTA: TIntegerField;
    cdsPedidoVLR_ENTRADA: TFloatField;
    cdsPedidoDTINICIO_DUPLICATA: TDateField;
    cdsPedidoID_MAPA: TIntegerField;
    cdsPedidosdsPedido_Desconto: TDataSetField;
    cdsPedidosdsPedido_Itens: TDataSetField;
    cdsPedido_ItensID: TIntegerField;
    cdsPedido_ItensITEM: TIntegerField;
    cdsPedido_ItensID_PRODUTO: TIntegerField;
    cdsPedido_ItensID_COR: TFMTBCDField;
    cdsPedido_ItensTAMANHO: TStringField;
    cdsPedido_ItensQTD: TFloatField;
    cdsPedido_ItensQTD_FATURADO: TFloatField;
    cdsPedido_ItensQTD_RESTANTE: TFloatField;
    cdsPedido_ItensQTD_CANCELADO: TFloatField;
    cdsPedido_ItensVLR_DESCONTO: TFloatField;
    cdsPedido_ItensCANCELADO: TStringField;
    cdsPedido_ItensDTENTREGA: TDateField;
    cdsPedido_ItensFATURADO: TStringField;
    cdsPedido_ItensDTFATURADO: TDateField;
    cdsPedido_ItensCOD_PRODUTO_CLIENTE: TStringField;
    cdsPedido_ItensTIPO: TStringField;
    cdsPedido_ItensUNIDADE: TStringField;
    cdsPedido_ItensNUMOS: TStringField;
    cdsPedido_ItensPERC_DESCONTO: TFloatField;
    cdsPedido_ItensVLR_FRETE: TFloatField;
    cdsPedido_ItensBASE_ICMS: TFloatField;
    cdsPedido_ItensVLR_ICMS: TFloatField;
    cdsPedido_ItensBASE_ICMSTRANSF: TFloatField;
    cdsPedido_ItensPERC_TRANSF: TFloatField;
    cdsPedido_ItensVLR_TRANSF: TFloatField;
    cdsPedido_ItensVLR_IPI: TFloatField;
    cdsPedido_ItensBASE_ICMSSIMPLES: TFloatField;
    cdsPedido_ItensVLR_ICMSSIMPLES: TFloatField;
    cdsPedido_ItensPERC_ICMSSIMPLES: TFloatField;
    cdsPedido_ItensBASE_ICMSSUBST: TFloatField;
    cdsPedido_ItensVLR_ICMSSUBST: TFloatField;
    cdsPedido_ItensVLR_DESCONTORATEIO: TFloatField;
    cdsPedido_ItensID_CFOP: TIntegerField;
    cdsPedido_ItensID_CSTIPI: TIntegerField;
    cdsPedido_ItensID_CSTICMS: TIntegerField;
    cdsPedido_ItensPERC_ICMS: TFloatField;
    cdsPedido_ItensPERC_IPI: TFloatField;
    cdsPedido_ItensREFERENCIA: TStringField;
    cdsPedido_ItensNOMEPRODUTO: TStringField;
    cdsPedido_ItensOBS_COMPLEMENTAR: TStringField;
    cdsPedido_ItensCALCULARICMSSOBREIPI: TStringField;
    cdsPedido_ItensVLR_UNITARIO: TFloatField;
    cdsPedido_ItensID_CONFIG_CFOP: TIntegerField;
    cdsPedido_ItensVLR_TOTAL: TFloatField;
    cdsPedido_ItensQTD_AFATURAR: TFloatField;
    cdsPedido_ItensID_VARIACAO: TIntegerField;
    cdsPedido_ItensOBS: TMemoField;
    cdsPedido_ItensPERC_TRIBICMS: TFloatField;
    cdsPedido_ItensID_ATELIER: TIntegerField;
    cdsPedido_ItensVLR_UNITARIO_ATELIER: TFloatField;
    cdsPedido_ItensVLR_TOTAL_ATELIER: TFloatField;
    cdsPedido_ItensDT_ENVIO_ATELIER: TDateField;
    cdsPedido_ItensDT_RETORNO_ATELIER: TDateField;
    cdsPedido_ItensVLR_PAGTO_ATELIER: TFloatField;
    cdsPedido_ItensDT_PAGTO_ATELIER: TDateField;
    cdsPedido_ItensAPROVADO_ORC: TStringField;
    cdsPedido_ItensMOTIVO_NAO_APROV: TMemoField;
    cdsPedido_ItensDTAPROVADO_NAO: TDateField;
    cdsPedido_ItensID_ORCAMENTO: TIntegerField;
    cdsPedido_ItensITEM_ORCAMENTO: TIntegerField;
    cdsPedido_ItensQTD_LIBERADA: TFloatField;
    cdsPedido_ItensQTD_PRODUZIDA: TFloatField;
    cdsPedido_ItensNUM_TALAO: TStringField;
    cdsPedido_ItensGERAR_LOTE: TStringField;
    cdsPedido_ItensCARIMBO: TStringField;
    cdsPedido_ItensDTPRODUCAO: TDateField;
    cdsPedido_ItensID_NCM: TIntegerField;
    cdsPedido_ItensTIPO_ORCAMENTO: TStringField;
    cdsPedido_ItensEND_FOTO: TStringField;
    cdsPedido_ItensITEM_CLIENTE: TIntegerField;
    cdsPedido_ItensQTD_PECA: TIntegerField;
    cdsPedido_ItensGRAVACAO_COM_ERRO: TStringField;
    cdsPedido_ItensQTD_FUT: TFloatField;
    cdsPedido_ItensTIPO_REG: TStringField;
    cdsPedido_ItensID_MOVESTOQUE: TIntegerField;
    cdsPedido_ItensGERAR_ESTOQUE: TStringField;
    cdsPedido_ItensITEM_ORIGINAL: TIntegerField;
    cdsPedido_ItensPERC_DIFERIMENTO: TFloatField;
    cdsPedido_ItensVLR_ICMSDIFERIDO: TFloatField;
    sdsPedido_DescontoID: TIntegerField;
    sdsPedido_DescontoITEM: TIntegerField;
    sdsPedido_DescontoPERC_DESCONTO: TFloatField;
    sdsPedido_DescontoVLR_DESCONTO: TIntegerField;
    cdsPedido_DescontoID: TIntegerField;
    cdsPedido_DescontoITEM: TIntegerField;
    cdsPedido_DescontoPERC_DESCONTO: TFloatField;
    cdsPedido_DescontoVLR_DESCONTO: TIntegerField;
    sdsPedido_ItensTIPO_ACESSORIO: TStringField;
    sdsPedido_ItensCOMPRIMENTO_VOLUME: TFloatField;
    sdsPedido_ItensPERC_COMISSAO: TFloatField;
    sdsPedido_ItensCODCFOP: TStringField;
    sdsPedido_ItensNCM: TStringField;
    cdsPedido_ItensTIPO_ACESSORIO: TStringField;
    cdsPedido_ItensCOMPRIMENTO_VOLUME: TFloatField;
    cdsPedido_ItensPERC_COMISSAO: TFloatField;
    cdsPedido_ItensCODCFOP: TStringField;
    cdsPedido_ItensNCM: TStringField;
    sdsPedido_Item_Tipo: TSQLDataSet;
    cdsPedido_Item_Tipo: TClientDataSet;
    dsPedido_Item_Tipo: TDataSource;
    dsPedido_Item_Mestre: TDataSource;
    sdsPedido_Item_TipoID: TIntegerField;
    sdsPedido_Item_TipoITEM: TIntegerField;
    sdsPedido_Item_TipoCOMPRIMENTO: TFloatField;
    sdsPedido_Item_TipoLARGURA: TFloatField;
    sdsPedido_Item_TipoALTURA: TFloatField;
    sdsPedido_Item_TipoVLR_KG: TFloatField;
    sdsPedido_Item_TipoQTD: TFloatField;
    sdsPedido_Item_TipoVLR_UNITARIO: TFloatField;
    sdsPedido_Item_TipoVLR_TOTAL: TFloatField;
    sdsPedido_Item_TipoDIAMETRO: TFloatField;
    sdsPedido_Item_TipoDIAMETRO_EXT: TFloatField;
    sdsPedido_Item_TipoDIAMETRO_INT: TFloatField;
    sdsPedido_Item_TipoPAREDE: TFloatField;
    sdsPedido_Item_TipoPESO: TFloatField;
    sdsPedido_Item_TipoCOMPLEMENTO_NOME: TStringField;
    sdsPedido_Item_TipoTIPO_ORCAMENTO: TStringField;
    sdsPedido_Item_TipoDESCRICAO_TIPO: TStringField;
    sdsPedido_Item_TipoID_ACABAMENTO: TIntegerField;
    sdsPedido_Item_TipoID_REDONDO_MOD: TIntegerField;
    sdsPedido_Item_TipoID_CMOEDA: TIntegerField;
    sdsPedido_Item_TipoID_FUROS: TIntegerField;
    sdsPedido_Item_TipoID_FURACAO: TIntegerField;
    sdsPedido_Item_TipoID_PERFIL: TIntegerField;
    sdsPedido_Item_TipoID_VIDRO: TIntegerField;
    sdsPedido_Item_TipoQTD_FUROS: TIntegerField;
    sdsPedido_Item_TipoVLR_DOBRA: TFloatField;
    sdsPedido_Item_TipoID_CHAPA: TIntegerField;
    cdsPedido_ItenssdsPedido_Item_Tipo: TDataSetField;
    cdsPedido_Item_TipoID: TIntegerField;
    cdsPedido_Item_TipoITEM: TIntegerField;
    cdsPedido_Item_TipoCOMPRIMENTO: TFloatField;
    cdsPedido_Item_TipoLARGURA: TFloatField;
    cdsPedido_Item_TipoALTURA: TFloatField;
    cdsPedido_Item_TipoVLR_KG: TFloatField;
    cdsPedido_Item_TipoQTD: TFloatField;
    cdsPedido_Item_TipoVLR_UNITARIO: TFloatField;
    cdsPedido_Item_TipoVLR_TOTAL: TFloatField;
    cdsPedido_Item_TipoDIAMETRO: TFloatField;
    cdsPedido_Item_TipoDIAMETRO_EXT: TFloatField;
    cdsPedido_Item_TipoDIAMETRO_INT: TFloatField;
    cdsPedido_Item_TipoPAREDE: TFloatField;
    cdsPedido_Item_TipoPESO: TFloatField;
    cdsPedido_Item_TipoCOMPLEMENTO_NOME: TStringField;
    cdsPedido_Item_TipoTIPO_ORCAMENTO: TStringField;
    cdsPedido_Item_TipoDESCRICAO_TIPO: TStringField;
    cdsPedido_Item_TipoID_ACABAMENTO: TIntegerField;
    cdsPedido_Item_TipoID_REDONDO_MOD: TIntegerField;
    cdsPedido_Item_TipoID_CMOEDA: TIntegerField;
    cdsPedido_Item_TipoID_FUROS: TIntegerField;
    cdsPedido_Item_TipoID_FURACAO: TIntegerField;
    cdsPedido_Item_TipoID_PERFIL: TIntegerField;
    cdsPedido_Item_TipoID_VIDRO: TIntegerField;
    cdsPedido_Item_TipoQTD_FUROS: TIntegerField;
    cdsPedido_Item_TipoVLR_DOBRA: TFloatField;
    cdsPedido_Item_TipoID_CHAPA: TIntegerField;
    mAux: TClientDataSet;
    mAuxID_Pedido: TIntegerField;
    mAuxItem_Pedido: TIntegerField;
    mAuxNum_Pedido: TIntegerField;
    sdsPedidoEMAIL_COMPRAS: TStringField;
    cdsPedidoEMAIL_COMPRAS: TStringField;
    procedure dspPedidoUpdateError(Sender: TObject;
      DataSet: TCustomClientDataSet; E: EUpdateError;
      UpdateKind: TUpdateKind; var Response: TResolverResponse);
  private
    { Private declarations }

  public
    { Public declarations }
    procedure prc_Localizar(ID: Integer);

  end;

var
  DMCopiaPedido: TDMCopiaPedido;

implementation

uses DmdDatabase, uUtilPadrao;

{$R *.dfm}

{ TDMCadCFOP}

procedure TDMCopiaPedido.prc_Localizar(ID: Integer); //-1 é para inclusão
begin
  cdsPedido.Close;
  sdsPedido.ParamByName('ID').AsInteger := ID;
  cdsPedido.Open;
end;

procedure TDMCopiaPedido.dspPedidoUpdateError(Sender: TObject; DataSet: TCustomClientDataSet;
  E: EUpdateError; UpdateKind: TUpdateKind; var Response: TResolverResponse);
begin
  dmDatabase.prc_UpdateError(DataSet.Name,UpdateKind,E);
end;

end.
